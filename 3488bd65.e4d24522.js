(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{129:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return m}));var a=n(0),o=n.n(a);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=o.a.createContext({}),u=function(e){var t=o.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},b=function(e){var t=u(e.components);return o.a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},d=o.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,c=e.originalType,r=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),b=u(n),d=a,m=b["".concat(r,".").concat(d)]||b[d]||p[d]||c;return n?o.a.createElement(m,s(s({ref:t},l),{},{components:n})):o.a.createElement(m,s({ref:t},l))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var c=n.length,r=new Array(c);r[0]=d;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s.mdxType="string"==typeof e?e:a,r[1]=s;for(var l=2;l<c;l++)r[l]=n[l];return o.a.createElement.apply(null,r)}return o.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},197:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/rds1-3e86198587c111554c98d4f3824e57bb.png"},198:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/rds2-1d184384c652644266ff2413d84b860e.png"},199:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/rds3-7c6f40f5748210b32eb6f79b7b071481.png"},83:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return s})),n.d(t,"toc",(function(){return i})),n.d(t,"default",(function(){return u}));var a=n(3),o=n(7),c=(n(0),n(129)),r={id:"rds_access",title:"Access to RDS in a private subnet from local machine"},s={unversionedId:"rds_access",id:"rds_access",isDocsHomePage:!1,title:"Access to RDS in a private subnet from local machine",description:"Securely connecting to an AWS RDS instance",source:"@site/docs/rds_access.md",slug:"/rds_access",permalink:"/API-Playbook/rds_access",editUrl:"https://github.com/LBHackney-IT/API-Playbook/edit/master/docs/rds_access.md",version:"current",sidebar:"docs",previous:{title:"Generating Tokens",permalink:"/API-Playbook/generating_tokens"},next:{title:"Access to EC2 in a private subnet from local machine",permalink:"/API-Playbook/ec2_access"}},i=[{value:"Securely connecting to an AWS RDS instance",id:"securely-connecting-to-an-aws-rds-instance",children:[]},{value:"Pre-requisites",id:"pre-requisites",children:[]},{value:"Steps",id:"steps",children:[]}],l={toc:i};function u(e){var t=e.components,r=Object(o.a)(e,["components"]);return Object(c.b)("wrapper",Object(a.a)({},l,r,{components:t,mdxType:"MDXLayout"}),Object(c.b)("h2",{id:"securely-connecting-to-an-aws-rds-instance"},"Securely connecting to an AWS RDS instance"),Object(c.b)("p",null,"The instructions will help you connect to an AWS RDS instance without the need for that RDS resource to have a publicly available DNS. This connection can be made using a database client such as pgadmin.  You will utilise AWS session manager to connect to a Bastion host (or jumpbox) within the same AWS account as your desired RDS database."),Object(c.b)("h2",{id:"pre-requisites"},"Pre-requisites"),Object(c.b)("ol",null,Object(c.b)("li",{parentName:"ol"},"The aws cli installed - guide:")),Object(c.b)("p",null,Object(c.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html"},"https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html")),Object(c.b)("ol",{start:2},Object(c.b)("li",{parentName:"ol"},"The aws session manager plugin installed - guide:")),Object(c.b)("p",null,Object(c.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/systems-manager/latest/userguide/session-manager-working-with-install-plugin.html"},"https://docs.aws.amazon.com/systems-manager/latest/userguide/session-manager-working-with-install-plugin.html")),Object(c.b)("p",null," 3.An ssh client installed (don\u2019t think it comes as standard in Windows) - guide:"),Object(c.b)("p",null,Object(c.b)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/windows-server/administration/openssh/openssh_install_firstuse"},"https://docs.microsoft.com/en-us/windows-server/administration/openssh/openssh_install_firstuse")),Object(c.b)("ol",{start:4},Object(c.b)("li",{parentName:"ol"},"Your Google account be given the relevant permissions to the AWS account and the EC2 instance (jumpbox)"),Object(c.b)("li",{parentName:"ol"},"The instance ID of the jumpbox"),Object(c.b)("li",{parentName:"ol"},"The private key for the EC2 instance that you will be connecting through")),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"}," You will also need : ")),Object(c.b)("p",null,"a. The DNS of the RDS instance you want to connect to"),Object(c.b)("p",null,"b. The port that is open on that RDS instance"),Object(c.b)("p",null,"c. The database within the RDS instance you want to connect to"),Object(c.b)("p",null,"d. The database credentials for the RDS instance you want to connect to"),Object(c.b)("h2",{id:"steps"},"Steps"),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"}," 1 - AWS credentials ")),Object(c.b)("p",null,"Ensure that you have up to date AWS credentials for the account you want to access.\nThere are multiple ways to do this:"),Object(c.b)("p",null,Object(c.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html"},"https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html")),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"}," Here we will describe one of them: ")),Object(c.b)("ol",null,Object(c.b)("li",{parentName:"ol"},"Go to :")),Object(c.b)("p",null,Object(c.b)("a",{parentName:"p",href:"https://hackney.awsapps.com/start#/"},"https://hackney.awsapps.com/start#/")),Object(c.b)("p",null,"and log in using your Google account credentials"),Object(c.b)("ol",{start:2},Object(c.b)("li",{parentName:"ol"},"Expand the account that you will need access to and click on \u201cCommand line or programmatic access\u201d next to the role that you want to use.\nThe role you will be using will have been explained to you beforehand.")),Object(c.b)("p",null,Object(c.b)("img",{alt:"alt text",src:n(197).default})),Object(c.b)("ol",{start:3},Object(c.b)("li",{parentName:"ol"},"You are then provided with instructions on how to add the credentials you will be authenticating with (note macOs and Windows options).")),Object(c.b)("p",null,Object(c.b)("img",{alt:"alt text",src:n(198).default})),Object(c.b)("p",null,"2 - Connecting to RDS"),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"}," 2. In a shell - run the below command replacing the values in the table below with the ones for your connection. ")),Object(c.b)("p",null,Object(c.b)("img",{alt:"alt text",src:n(199).default})),Object(c.b)("p",null,"You can then connect using your client on 127.0.0.1:9999"))}u.isMDXComponent=!0}}]);