(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{116:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var a=n(0),r=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=r.a.createContext({}),u=function(e){var t=r.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},p=function(e){var t=u(e.components);return r.a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},b=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),p=u(n),b=a,m=p["".concat(i,".").concat(b)]||p[b]||d[b]||o;return n?r.a.createElement(m,c(c({ref:t},s),{},{components:n})):r.a.createElement(m,c({ref:t},s))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=b;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:a,i[1]=c;for(var s=2;s<o;s++)i[s]=n[s];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"},86:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return c})),n.d(t,"toc",(function(){return l})),n.d(t,"default",(function(){return u}));var a=n(3),r=n(7),o=(n(0),n(116)),i={id:"uptime_monitoring",title:"Uptime Monitoring"},c={unversionedId:"uptime_monitoring",id:"uptime_monitoring",isDocsHomePage:!1,title:"Uptime Monitoring",description:"Centralised Uptime Monitoring",source:"@site/docs/uptime_monitoring.md",slug:"/uptime_monitoring",permalink:"/API-Playbook/uptime_monitoring",editUrl:"https://github.com/LBHackney-IT/API-Playbook/edit/master/docs/uptime_monitoring.md",version:"current",sidebar:"docs",previous:{title:"Performance Monitoring",permalink:"/API-Playbook/performance_monitoring"},next:{title:"X Ray",permalink:"/API-Playbook/x_ray"}},l=[{value:"Centralised Uptime Monitoring",id:"centralised-uptime-monitoring",children:[]},{value:"Video Tutorial",id:"video-tutorial",children:[]},{value:"AWS Canaries",id:"aws-canaries",children:[]},{value:"Canary Configuration",id:"canary-configuration",children:[]},{value:"Setting up Canaries",id:"setting-up-canaries",children:[]}],s={toc:l};function u(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"centralised-uptime-monitoring"},"Centralised Uptime Monitoring"),Object(o.b)("p",null,"Hackney now has multiple Platform APIs deployed to the AWS cloud. Each API is a self-contained application exposing a specific set of data.\nAs we are creating and deploying multiple APIs in AWS It\u2019s necessary to be able to monitor the health and performance of these applications. AWS provides a centralised monitoring and logging solution of the applications."),Object(o.b)("p",null,"We can monitor the uptime performance of individual endpoints and APIs using AWS Canaries."),Object(o.b)("h2",{id:"video-tutorial"},"Video Tutorial"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"}," You can start by having a look at our tutorial video: ")),Object(o.b)("figure",{class:"video-container"},Object(o.b)("iframe",{width:"100%",src:"https://www.youtube.com/embed/bYMdvCz0QUk",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0})),Object(o.b)("h2",{id:"aws-canaries"},"AWS Canaries"),Object(o.b)("p",null,"AWS canaries are accessible via the CloudWatch console. Amazon defines a canary as configurable scripts that run on a schedule to monitor your endpoints and APIs.\nA canary can be configured to make scheduled requests to a health check endpoint."),Object(o.b)("p",null,"CloudWatch is the AWS console or dashboard for managing operational data such as logs, metrics and events.\nCanaries are used for all Platform API production environments."),Object(o.b)("p",null,"Monitoring the health and performance of staging environments has no long-term benefit in relation to production environments. Production applications are public facing and any downtime should be immediately signalled and logged by the deployment environment. When downtime is signalled we can investigate the cause via the CloudWatch logs. Each Platform API canary calls a production environment API endpoint at a regular interval."),Object(o.b)("h2",{id:"canary-configuration"},"Canary Configuration"),Object(o.b)("p",null,"Canaries can be configured to run once or on a user defined schedule. A scheduled canary can run for 24 hours a day as often as once per minute. A canary also has configurable alarm parameters. These are parameters which will set off an alarm in CloudWatch if the defined conditions are met.\nAlarm parameters can be very specific and granular."),Object(o.b)("p",null,"A canary will require any authorization headers and values needed to access the API in the configuration.\nAccessing the dashboard for a Canary in CloudWatch lets you view the status of the Canary over a period of time."),Object(o.b)("h2",{id:"setting-up-canaries"},"Setting up Canaries"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"}," Creating a canary which will ping an endpoint and check the response ")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"In the aws console go to, cloud watch then click on ",Object(o.b)("strong",{parentName:"p"}," canaries ")," ."),Object(o.b)("pre",{parentName:"li"},Object(o.b)("code",{parentName:"pre"},"    https://signin.aws.amazon.com/signin?redirect_uri=https%3A%2F%2Feu-west-2.console.aws.amazon.com%2Fcloudwatch%2Fhome%3Fregion%3Deu-west-2%26state%3DhashArgs%2523synthetics%253Acanary%252Flist%26isauthcode%3Dtrue&client_id=arn%3Aaws%3Aiam%3A%3A015428540659%3Auser%2Fcloudwatch&forceMobileApp=0&code_challenge=afPX8AredTuJ4RR-8tmbbYoDccc2YpaukmzbN5Up2z4&code_challenge_method=SHA-256\n"))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Click on ",Object(o.b)("strong",{parentName:"p"},' "Create Canary" ')," , choose ",Object(o.b)("strong",{parentName:"p"},' "Use a blueprint" ')," and  ",Object(o.b)("strong",{parentName:"p"},' "Heartbeat monitoring"')," .")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Give a name which makes it easily recognisable as whats it is (try and get the name of the API and the endpoint it's testing)"))),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"}," ",Object(o.b)("u",null," Checking a 200 response ")," ")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"}," ",Object(o.b)("u",null," Altering the code to check a 404 is returned ")," ")),Object(o.b)("p",null,"For more information, check out the aws documentation below:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},"          https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/CloudWatch_Synthetics_Canaries_Create.html\n")))}u.isMDXComponent=!0}}]);