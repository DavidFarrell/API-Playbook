(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{108:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return a})),n.d(t,"metadata",(function(){return l})),n.d(t,"toc",(function(){return c})),n.d(t,"default",(function(){return u}));var o=n(3),r=n(7),i=(n(0),n(119)),a={id:"centralised_logging",title:"Centralised Logging and Monitoring"},l={unversionedId:"centralised_logging",id:"centralised_logging",isDocsHomePage:!1,title:"Centralised Logging and Monitoring",description:"Purpose",source:"@site/docs/centralised_logging.md",slug:"/centralised_logging",permalink:"/API-Playbook/centralised_logging",editUrl:"https://github.com/LBHackney-IT/API-Playbook/edit/master/docs/centralised_logging.md",version:"current",sidebar:"docs",previous:{title:"Application Logging Guidelines",permalink:"/API-Playbook/application_logging"},next:{title:"Performance Monitoring",permalink:"/API-Playbook/performance_monitoring"}},c=[{value:"Purpose",id:"purpose",children:[]},{value:"Introduction",id:"introduction",children:[]},{value:"Logging Practices",id:"logging-practices",children:[]},{value:"Log message structure",id:"log-message-structure",children:[]}],s={toc:c};function u(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(o.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h2",{id:"purpose"},"Purpose"),Object(i.b)("p",null,"The purpose of this document is to outline some best practices around logging in applications.  It highlights what tools might be used for logging, a general structure of logs and what types of logs should be emitted."),Object(i.b)("h2",{id:"introduction"},"Introduction"),Object(i.b)("p",null,"This document outlines our approach to monitoring and alerting in our APIs and supporting infrastructure.  We already have the benefit of infrastructure level logging through the use of the AWS cloud infrastructure.  However, it is imporatant that our applications provide insight into what is happening as it processes each request."),Object(i.b)("h2",{id:"logging-practices"},"Logging Practices"),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"}," Application Level Logging ")),Object(i.b)("p",null,"Application level logging is an integral part of the application development process.  It provides useful insight into what is happening under the hood when your application runs.  Now that our applications are becoming more cloud native it has become even more important to have useful information emitting from your application for monitoring and debugging purposes.  This document aims to highlight some logging standards and best practices for our applications."),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"}," Leveraging Existing Tooling ")),Object(i.b)("p",null,"There are a number of tools that exist that provide robust, battle tested logging mechanisms.  Some of these that we have used in the past include:"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"NLog"),Object(i.b)("li",{parentName:"ol"},"Log4net"),Object(i.b)("li",{parentName:"ol"},"Asp.net core logging framework"),Object(i.b)("li",{parentName:"ol"},"AWS Lambda Logger")),Object(i.b)("p",null,"While there is not a set standard for which tool to utilise, it is important that applications do emit logs so that any issues can be easily traced to its source."),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"}," Developing a Custom Solution ")),Object(i.b)("p",null,"It is also reasonable to define our own custom logging solution which could be shared across all projects, possibly by building a Nuget package module which can be added to our base API as well as referenced in any existing projects"),Object(i.b)("h2",{id:"log-message-structure"},"Log message structure"),Object(i.b)("p",null,"Logs must be emitted in JSON format and, in order to have a clear view and a consistent understanding of log entries, it is best to define a meaningful structure for your log entries:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},'  {\n      \u201cLog type\u201d: \u201cCaptain\u2019s log\u201d\n\n      \u201cDate\u201d: \u201c3443.2\u201d\n\n      \u201cLog Details\u201d: \u201cWe have reached the Veridian mining colony.\u201d\n\n      \u201cCorrelation Id\u201d: "2a571fc5-3770-4aa6-aa5e-587b58d9a5fa"\n    }\n')),Object(i.b)("p",null,"With a consistent standard of logging.  Logs can be scrutinised by a person or be consumed by another tool to extend our insight capabilities."),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"}," Log Properties "),"\nPossible properties for a log entry could include:"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"Date"),Object(i.b)("li",{parentName:"ol"},"Type of entry eg Information, Debug, Warning, Error, Critical"),Object(i.b)("li",{parentName:"ol"},"Message detail"),Object(i.b)("li",{parentName:"ol"},"Debug information"),Object(i.b)("li",{parentName:"ol"},"Component that created the entry"),Object(i.b)("li",{parentName:"ol"},"Correlation Id")))}u.isMDXComponent=!0},119:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return d}));var o=n(0),r=n.n(o);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=r.a.createContext({}),u=function(e){var t=r.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=u(e.components);return r.a.createElement(s.Provider,{value:t},e.children)},g={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},b=r.a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,a=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),p=u(n),b=o,d=p["".concat(a,".").concat(b)]||p[b]||g[b]||i;return n?r.a.createElement(d,l(l({ref:t},s),{},{components:n})):r.a.createElement(d,l({ref:t},s))}));function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,a=new Array(i);a[0]=b;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:o,a[1]=l;for(var s=2;s<i;s++)a[s]=n[s];return r.a.createElement.apply(null,a)}return r.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);