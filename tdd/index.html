<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/API-Playbook/blog/rss.xml" title="Hackney API Playbook Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/API-Playbook/blog/atom.xml" title="Hackney API Playbook Blog Atom Feed"><title data-react-helmet="true">Good TDD Principles | Hackney API Playbook</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Good TDD Principles | Hackney API Playbook"><meta data-react-helmet="true" name="description" content="Purpose"><meta data-react-helmet="true" property="og:description" content="Purpose"><meta data-react-helmet="true" property="og:url" content="https://lbhackney-it.github.io/API-Playbook/API-Playbook/tdd"><link data-react-helmet="true" rel="shortcut icon" href="/API-Playbook/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://lbhackney-it.github.io/API-Playbook/API-Playbook/tdd"><link rel="stylesheet" href="/API-Playbook/styles.ed6e5456.css">
<link rel="stylesheet" href="/API-Playbook/main.4988b536.css">
<link rel="preload" href="/API-Playbook/styles.ba3365c1.js" as="script">
<link rel="preload" href="/API-Playbook/runtime~main.1aaefb47.js" as="script">
<link rel="preload" href="/API-Playbook/main.aca96e80.js" as="script">
<link rel="preload" href="/API-Playbook/1.d679a41a.js" as="script">
<link rel="preload" href="/API-Playbook/2.9f0e9ff1.js" as="script">
<link rel="preload" href="/API-Playbook/48.7602dea5.js" as="script">
<link rel="preload" href="/API-Playbook/935f2afb.7230abdf.js" as="script">
<link rel="preload" href="/API-Playbook/17896441.1cb26a69.js" as="script">
<link rel="preload" href="/API-Playbook/b2eeec30.21f728b6.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/API-Playbook/"><img src="/API-Playbook/img/logo-long.svg" alt="API Playbook" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/API-Playbook/img/logo-long.svg" alt="API Playbook" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">API Playbook</strong></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/LBHackney-IT/API-Playbook" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/API-Playbook/"><img src="/API-Playbook/img/logo-long.svg" alt="API Playbook" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/API-Playbook/img/logo-long.svg" alt="API Playbook" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">API Playbook</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://github.com/LBHackney-IT/API-Playbook" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Release Notes</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/notes">Notes</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Home</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/api_standards">API Standards</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/platform_api_vs_service_api">Platform API vs Service API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/documentation">API Documentation</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Development Process</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Designing your API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/api_design_principles">API Design Principles</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/api_implementation_guidelines">API Implementation Guidelines</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/error_codes">Error Codes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/naming_conventions">Naming Conventions</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">API Practices and Tools</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/linting">Linting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/static_code_analysis">Static Code Analysis</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">DevOps Practices</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/branching_strategy">Branching Strategy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/deployment_pipeline">Deployment Pipeline</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/infrastructure">Infrastucture as Code</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">How to build an API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/preferred_tech_stack">Preferred Tech Stack</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/api_boilerplate">API Boilerplate - Base API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/clean_architecture">Clean Architecture</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/serverless_lambda">Serverless Lambda Framework</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Testing</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/API-Playbook/tdd">Good TDD Principles</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/API-Playbook/unit_test">Writing Unit Tests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/API-Playbook/integration_tests">How to write integration tests</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Deploying your API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/aws_ecs">AWS / ECS with Fargate and when to use</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/lambda_best_practices">Lambda Functions Use and Good Practice</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/multiple_docker_containers">Composing Your Application With Multiple Docker Containers</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Monitoring</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/alerting">Alerting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/application_logging">Application Logging Guidelines</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/centralised_logging">Centralised Logging and Monitoring</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/performance_monitoring">Performance Monitoring</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/uptime_monitoring">Uptime Monitoring</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Request Tracing</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/x_ray">X Ray</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Securing your API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/api_keys">API Keys</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Lambda authoriser</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/generating_tokens">Generating Tokens</a></li></ul></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Other Useful Information</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/rds_access">Access to RDS in a private subnet from local machine</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/ec2_access">Access to EC2 in a private subnet from local machine</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/postgresql">Creating users in PostgreSQL</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Data Migration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/data_migration">Setting Up DMS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/pipeline_implementation">Pipeline Implementation</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">End to End Training</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/first_end_point">Create your first End Point</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Contact Us</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/API-Playbook/contact_us">Contact The Hackney API Team</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Good TDD Principles</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="purpose"></a>Purpose<a class="hash-link" href="#purpose" title="Direct link to heading">#</a></h2><p>The purpose of this section is to provide some general guidelines on how we conduct testing in our applications.  This will give our developers some baseline standards on how to go about testing.  These guidelines are not intended to be prescriptive on what developers should test but to ensure that with a consistent understanding of our tests, it will be easy to grasp by other developers.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="introduction"></a>Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">#</a></h2><p>Hackneyâ€™s development standards have evolved over the past couple of years and one of the underpinning principles of this evolution is the adoption of test driven development (TDD) where developers are encouraged to start implementing a solution by first writing tests.  These tests should describe the feature being implemented and should steer the implementation as it develops.  The tests should let developers know what a unit or module is expected to do and should provide feedback on whether or not what was required has been achieved.  It is also useful to have these tests in place as a means of regression testing.  As your implementation grows it becomes more and more difficult to determine if any previous code gets broken by newer functionality.  With proper test coverage, regression testing is included by default.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="tdd-principles"></a>TDD Principles<a class="hash-link" href="#tdd-principles" title="Direct link to heading">#</a></h2><p>The following are some of the principles we have adopted as part of our TDD principles.  These are meant to be used as guidelines for testing your application:</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="test-setup"></a>Test Setup<a class="hash-link" href="#test-setup" title="Direct link to heading">#</a></h2><p>Always`` follow the triple â€˜Aâ€™ structure - Arrange, Act, Assert [AAAs]
What we should be testing for</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="test-naming"></a>Test Naming<a class="hash-link" href="#test-naming" title="Direct link to heading">#</a></h2><p>Tests should be clearly named - ideally the name of the test should describe the implementation you are trying to deliver.  For example
public void Test1() - Not good
public void GetResidentWithValidIdReturnsCorrectRecord() - Better
Unit Tests
Unit tests should provide good coverage of the various scenarios that may be encountered; from the main success scenario to any exceptionals or edge cases.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="red-green-refactor-commit"></a>Red-Green-Refactor-Commit<a class="hash-link" href="#red-green-refactor-commit" title="Direct link to heading">#</a></h2><p>Red
Write the unit test as the basic function you want the code to fulfil which will fail
Write only as much code as is required to resolve the current error
EG: Our first test states that a specific method will return a specific value. At the start of development, this method will not exist, so the test will fail, as the error states that the method does not exist, create that method, but have it return null
Green
Write the minimum code required to get a test to pass
EG: If our test states that our method will return a specific value, we write the code to provide that value only. We could then write more complex tests to develop greater complexity
When the tests pass, refactor to simplify the code
When using the same variable value multiple times, extract it to SetUp
Commit
Save it to github</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="end-to-end-tests"></a>End-to-end Tests<a class="hash-link" href="#end-to-end-tests" title="Direct link to heading">#</a></h2><p>There should be end-to-end tests to test each feature you are implementing.  You can have good coverage of unit tests any they may all pass, but they can easily overlook issues with how each unit interacts with others.  End-to-end tests can pick up on these types of issues.
End-to-end tests can test and validate that a feature is implemented as per user need.
End-to-end tests are also good for regression testing; ensuring that each new implementation doesnâ€™t break the behaviour of the feature as a whole.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="test-coverage"></a>Test Coverage<a class="hash-link" href="#test-coverage" title="Direct link to heading">#</a></h2><p>Test coverage is all about ensuring that your implementation is sufficiently tested.  It is a method of quality checking the tests in our code, ensuring that it covers all possible scenarios and outcomes that your piece of code is expected to capture.
Test coverage is used as a metric to specify how much of our code needs to be covered by tests.  This will also encourage sufficient refactoring of code so that larger implementations can be broken down into smaller testable chunks.
[We need to determine what our test coverage standards should be]</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="when-should-you-fake-it"></a>When should you fake it?<a class="hash-link" href="#when-should-you-fake-it" title="Direct link to heading">#</a></h2><p>We use a number of different tools to â€˜fakeâ€™ or simulate the output of dependent modules not directly tested.  Modules such as Fakr, Moq, Bogus, etc are used across our development.  There is no specific requirement for any one of these to be used.  However, when used, they should be used in an appropriate manner.  The following are some guidelines on when you should fake an implementation.
When to fake it:
When a unit being tested has a dependency on another unit whose output is not directly part of a test, the dependencyâ€™s output can be faked.  For example if you are testing a unit that call another unit for data and you are not directly testing the data that gets returned, only what the unit does with the data.  The unit that returns the data can be faked.
When not to fake it:
If you are testing a piece of codeâ€™s output you will not fake the output you expect from the unit as you will not be able to get a useful test outcome.  For example,  in the following test:
[add example test]
if your unit accepts two numbers (2 and 2) and you are testing that it returns 4.  You will not create a fake output of â€˜4â€™ in our implementation and test that your unit returns â€˜4â€™</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/LBHackney-IT/API-Playbook/edit/master/docs/tdd.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/API-Playbook/serverless_lambda"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Serverless Lambda Framework</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/API-Playbook/unit_test"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Writing Unit Tests Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#purpose" class="table-of-contents__link">Purpose</a></li><li><a href="#introduction" class="table-of-contents__link">Introduction</a></li><li><a href="#tdd-principles" class="table-of-contents__link">TDD Principles</a></li><li><a href="#test-setup" class="table-of-contents__link">Test Setup</a></li><li><a href="#test-naming" class="table-of-contents__link">Test Naming</a></li><li><a href="#red-green-refactor-commit" class="table-of-contents__link">Red-Green-Refactor-Commit</a></li><li><a href="#end-to-end-tests" class="table-of-contents__link">End-to-end Tests</a></li><li><a href="#test-coverage" class="table-of-contents__link">Test Coverage</a></li><li><a href="#when-should-you-fake-it" class="table-of-contents__link">When should you fake it?</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Made by HackIT.</div></div></div></footer></div>
<script src="/API-Playbook/styles.ba3365c1.js"></script>
<script src="/API-Playbook/runtime~main.1aaefb47.js"></script>
<script src="/API-Playbook/main.aca96e80.js"></script>
<script src="/API-Playbook/1.d679a41a.js"></script>
<script src="/API-Playbook/2.9f0e9ff1.js"></script>
<script src="/API-Playbook/48.7602dea5.js"></script>
<script src="/API-Playbook/935f2afb.7230abdf.js"></script>
<script src="/API-Playbook/17896441.1cb26a69.js"></script>
<script src="/API-Playbook/b2eeec30.21f728b6.js"></script>
</body>
</html>